#!/usr/bin/env -S just --justfile
# A modular interface to nix-darwin/nixos operations using JustScripts
# Inspired by Henrik Lissner's dotfiles

import 'hey.d/common.just'
import 'hey.d/rebuild.just'
import 'hey.d/flake.just'
import 'hey.d/nix.just'
import 'hey.d/remote.just'
import 'hey.d/test.just'
import 'hey.d/ergodox.just'


# Default recipe - show help
default: help

# Show help message
help:
    @echo "Usage: hey <command> [args...] (powered by just)"
    @echo ""
    @just --justfile {{justfile()}} --list --unsorted
    @echo ""
    @echo "Examples:"
    @echo "  hey rebuild          # Rebuild and switch local system"
    @echo "  hey nuc              # Deploy to NUC server"
    @echo "  hey update nixpkgs   # Update only nixpkgs input"
    @echo "  hey search firefox   # Search for firefox packages"
    @echo ""
    @echo "Current flake host: {{flake_host}}"
    @echo "Platform: $(if {{is_darwin}}; then echo Darwin; else echo NixOS; fi)"