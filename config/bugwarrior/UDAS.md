# Bugwarrior UDA Management

Bugwarrior uses User Defined Attributes (UDAs) to store service-specific fields in Taskwarrior. This system uses two files to manage UDAs.

## Two-File System

### `bugwarrior-udas-auto.rc` (Auto-generated)

- **Location:** `config/taskwarrior/bugwarrior-udas-auto.rc`
- **Tracked in git:** No (in `.gitignore`)
- **Contains:** All service-defined UDAs from active bugwarrior services
- **Regenerate:** After adding/removing services or changing bugwarrior config

### `bugwarrior-udas-custom.rc` (Manual)

- **Location:** `config/taskwarrior/bugwarrior-udas-custom.rc`
- **Tracked in git:** Yes
- **Contains:** Custom UDAs not auto-generated by bugwarrior:
  - `jirapriority` - From Jira `extra_fields` config
  - Future custom fields

## Regenerating Auto UDAs

Run after:
- Adding/removing bugwarrior service targets
- Changing `extra_fields` configuration
- First-time setup on a new machine

```bash
bugwarrior uda > ~/.config/dotfiles/config/taskwarrior/bugwarrior-udas-auto.rc
```

## Adding Custom UDAs

When using `extra_fields` in bugwarrior config (e.g., Jira priority), add the UDA definition to `bugwarrior-udas-custom.rc`:

```toml
# In bugwarrior-work.toml
extra_fields = ["jirapriority:priority.name"]
```

```rc
# In bugwarrior-udas-custom.rc
uda.jirapriority.type=string
uda.jirapriority.label=JIRA Priority
```

## Current Custom UDAs

| UDA | Type | Source | Purpose |
|-----|------|--------|---------|
| `jirapriority` | string | Jira `extra_fields` | Maps to ASAP/H/M/L priority |

## Limitations

### Linear Priority

Bugwarrior's Linear service doesn't export priority. Would need a bugwarrior PR to add `linearpriority` UDA. For now, Linear tasks use `default_priority = "M"`.

## Troubleshooting

### "Service-defined UDAs exist" Warning

Regenerate the auto file:

```bash
bugwarrior uda > ~/.config/dotfiles/config/taskwarrior/bugwarrior-udas-auto.rc
```

### Missing UDA Errors

1. Check if UDA is in auto file: `grep uda.fieldname bugwarrior-udas-auto.rc`
2. If using `extra_fields`, add to custom file
3. Regenerate auto file after config changes
