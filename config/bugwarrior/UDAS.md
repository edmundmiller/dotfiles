# Bugwarrior UDA Management

Bugwarrior uses User Defined Attributes (UDAs) to store service-specific fields in Taskwarrior.

> See [README.md](README.md) for architecture overview and setup instructions.

## Per-Host UDA System

### Host-Specific Files (Auto-generated)

| File | Host | Tracked |
|------|------|---------|
| `bugwarrior-udas-seqeratop.rc` | Seqeratop | No |
| `bugwarrior-udas-mactraitorpro.rc` | MacTraitor-Pro | No |

- **Location:** `config/taskwarrior/`
- **Contains:** All service-defined UDAs from that host's bugwarrior services
- **Regenerate:** After adding/removing services or changing bugwarrior config

### `bugwarrior-udas-custom.rc` (Manual)

- **Location:** `config/taskwarrior/bugwarrior-udas-custom.rc`
- **Tracked in git:** Yes
- **Contains:** Custom UDAs not auto-generated by bugwarrior:
  - `jirapriority` - From Jira `extra_fields` config
  - Future custom fields

## Regenerating UDAs

Run on the appropriate host after:
- Adding/removing bugwarrior service targets
- Changing `extra_fields` configuration
- First-time setup on a new machine

```bash
# On Seqeratop:
bugwarrior uda > ~/.config/dotfiles/config/taskwarrior/bugwarrior-udas-seqeratop.rc

# On MacTraitor-Pro:
bugwarrior uda > ~/.config/dotfiles/config/taskwarrior/bugwarrior-udas-mactraitorpro.rc
```

## Adding Custom UDAs

When using `extra_fields` in bugwarrior config (e.g., Jira priority), add the UDA definition to `bugwarrior-udas-custom.rc`:

```toml
# In bugwarrior-work.toml
extra_fields = ["jirapriority:priority.name"]
```

```rc
# In bugwarrior-udas-custom.rc
uda.jirapriority.type=string
uda.jirapriority.label=JIRA Priority
```

## Current Custom UDAs

| UDA | Type | Source | Purpose |
|-----|------|--------|---------|
| `jirapriority` | string | Jira `extra_fields` | Maps to ASAP/H/M/L priority |

## Troubleshooting

### "Service-defined UDAs exist" Warning

Regenerate the UDA file for this host (see above).

### Missing UDA Errors

1. Check if UDA is in host file: `grep uda.fieldname bugwarrior-udas-*.rc`
2. If using `extra_fields`, add to custom file
3. Regenerate UDA file after config changes

### "Could not read include file" Error

UDA files don't exist. See [README.md](README.md) for first-time setup.

### Bootstrap Problem

Circular dependency: taskrc includes UDA files, but bugwarrior needs taskrc to generate them.

**Solution:** Create empty placeholders first:
```bash
touch ~/.config/dotfiles/config/taskwarrior/bugwarrior-udas-seqeratop.rc
touch ~/.config/dotfiles/config/taskwarrior/bugwarrior-udas-mactraitorpro.rc
```

Then generate UDAs normally.
