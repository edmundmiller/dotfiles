{
  // Docs: https://github.com/badlogic/pi-mono/blob/main/packages/coding-agent/docs/settings.md
  "$schema": "./settings-schema.json",
  // Model configuration - Opus 4.5 as default
  "defaultProvider": "anthropic",
  "defaultModel": "claude-opus-4-6",
  "defaultThinkingLevel": "medium",
  // Model cycling - Ctrl+P to toggle between these
  "enabledModels": ["claude-opus-4-6", "claude-sonnet-4-5", "claude-haiku-4-5", "gpt-5.3-codex"],
  // UI preferences
  "theme": "dark",
  "quietStartup": false,
  "doubleEscapeAction": "tree",
  "editorPaddingX": 1,
  // Compaction - keep more context for complex tasks
  "compaction": {
    "enabled": true,
    "reserveTokens": 16384,
    "keepRecentTokens": 24000,
  },
  // Retry configuration
  "retry": {
    "enabled": true,
    "maxRetries": 3,
    "baseDelayMs": 2000,
  },
  // Message delivery - one at a time for control
  "steeringMode": "one-at-a-time",
  "followUpMode": "one-at-a-time",
  // Images
  "images": {
    "autoResize": true,
    "blockImages": false,
  },
  // Skills as commands - disabled, see https://ampcode.com/news/slashing-custom-commands
  // Docs: https://github.com/badlogic/pi-mono/blob/main/packages/coding-agent/docs/skills.md
  "enableSkillCommands": false,
  // Packages - https://github.com/badlogic/pi-mono/blob/main/packages/coding-agent/docs/packages.md
  "packages": [
    {
      "source": "shitty-extensions",
      "extensions": [
        "oracle.ts",
        "memory-mode.ts",
        "plan-mode.ts",
        "handoff.ts",
        "usage-bar.ts",
        "ultrathink.ts",
        "status-widget.ts",
        "cost-tracker.ts",
        "funny-working-message.ts",
        "speedreading.ts",
        "loop.ts",
      ],
      "skills": [],
    },
    // Dynamic context pruning - forked from https://github.com/zenobi-us/pi-dcp
    "~/.config/dotfiles/packages/pi-dcp",
    // Rhubarb Pi collection - https://github.com/qualisero/rhubarb-pi
    {
      "source": "https://github.com/qualisero/rhubarb-pi",
      "extensions": [
        "hooks/background-notify",
        "hooks/session-color",
        "extensions/safe-git",
        // "extensions/pi-agent-scip" // SCIP for typescript/python - requires scip CLI
      ],
    },
    // tmustier extensions - https://github.com/tmustier/pi-extensions
    {
      "source": "git:github.com/tmustier/pi-extensions",
      "extensions": [
        "tab-status/tab-status.ts",
        "files-widget/index.ts",
        "code-actions/index.ts", // /code to pick code blocks from messages
        "raw-paste/index.ts", // /paste for raw clipboard paste
        "agent-guidance/agent-guidance.ts", // Agent guidance/steering
      ],
      "skills": [],
    },
    // Canvas for visual diagrams - https://github.com/jyaunches/pi-canvas
    {
      "source": "https://github.com/jyaunches/pi-canvas",
      "extensions": ["pi-extension/index.ts"],
    },
    // LSP integration - https://github.com/prateekmedia/pi-hooks
    {
      "source": "https://github.com/prateekmedia/pi-hooks",
      "extensions": ["lsp/lsp.ts", "lsp/lsp-tool.ts"],
    },
    // Amp-like features (session query, handoff) - https://github.com/pasky/pi-amplike
    {
      "source": "https://github.com/pasky/pi-amplike",
      "extensions": ["extensions/session-query.ts", "extensions/handoff.ts"],
      "skills": ["skills/session-query"],
    },
    // Multi-agent messaging/coordination - https://github.com/nicobailon/pi-messenger
    "npm:pi-messenger",
    // Interactive shell tool - https://github.com/nicobailon/pi-interactive-shell
    "npm:pi-interactive-shell",
  ],
}
