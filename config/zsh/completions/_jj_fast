#compdef jj
# Faster static JJ completion to avoid lag

_jj_fast() {
  local -a commands
  commands=(
    'abandon:Abandon a revision'
    'absorb:Move changes into mutable revisions'
    'bookmark:Manage bookmarks'
    'commit:Update description and create new change'
    'config:Manage config options'
    'describe:Update change description'
    'diff:Compare file contents'
    'edit:Set working-copy revision'
    'log:Show revision history'
    'new:Create new empty change'
    'next:Move to child revision'
    'prev:Move to parent revision'
    'rebase:Move revisions to different parents'
    'resolve:Resolve conflicted files'
    'restore:Restore paths from another revision'
    'show:Show commit description and changes'
    'split:Split a revision in two'
    'squash:Move changes into another revision'
    'status:Show repo status'
    'undo:Undo last operation'
  )
  
  _describe -t commands 'jj commands' commands
}

# Override the dynamic completer
compdef _jj_fast jj