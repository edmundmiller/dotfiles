{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "Home Assistant Adaptive Lighting",
  "description": "Schema for basnijholt/adaptive-lighting custom component. Auto-generated from const.py.",
  "type": "object",
  "properties": {
    "adaptive_lighting": {
      "type": "array",
      "items": {
        "type": "object",
        "additionalProperties": false,
        "required": ["name", "lights"],
        "properties": {
          "adapt_delay": {
            "type": "integer",
            "default": 0,
            "description": "Wait time (seconds) between light turn on and Adaptive Lighting applying changes. Might help to avoid flickering."
          },
          "adapt_only_on_bare_turn_on": {
            "type": "boolean",
            "default": false,
            "description": "When turning lights on initially. If set to `true`, AL adapts only if `light.turn_on` is invoked without specifying color or brightness. This e.g., prevents adaptation when activating a scene and marks the light as manually controlled. If `false`, AL adapts regardless of the presence of color or brightness in the initial `service_data`. Needs `take_over_control` enabled."
          },
          "autoreset_control_seconds": {
            "type": "integer",
            "default": 0,
            "description": "Automatically reset the manual control after a number of seconds. Set to 0 to disable."
          },
          "brightness_mode": {
            "type": "string",
            "default": "default",
            "description": "Brightness mode to use. Possible values are `default`, `linear`, and `tanh` (uses `brightness_mode_time_dark` and `brightness_mode_time_light`).",
            "enum": ["default", "linear", "tanh"]
          },
          "brightness_mode_time_dark": {
            "type": "integer",
            "default": 900,
            "description": "(Ignored if `brightness_mode='default'`) The duration in seconds to ramp up/down the brightness before/after sunrise/sunset."
          },
          "brightness_mode_time_light": {
            "type": "integer",
            "default": 3600,
            "description": "(Ignored if `brightness_mode='default'`) The duration in seconds to ramp up/down the brightness after/before sunrise/sunset."
          },
          "detect_non_ha_changes": {
            "type": "boolean",
            "default": false,
            "description": "Detects and halts adaptations for non-`light.turn_on` state changes. Needs `take_over_control` enabled. Caution: Some lights might falsely indicate an 'on' state, which could result in lights turning on unexpectedly. Note that this calls `homeassistant.update_entity` every `interval`! Disable this feature if you encounter such issues."
          },
          "include_config_in_attributes": {
            "type": "boolean",
            "default": false,
            "description": "Show all options as attributes on the switch in Home Assistant when set to `true`."
          },
          "initial_transition": {
            "type": "integer",
            "default": 1,
            "description": "Duration of the first transition when lights turn from `off` to `on` in seconds."
          },
          "intercept": {
            "type": "boolean",
            "default": true,
            "description": "Intercept and adapt `light.turn_on` calls to enabling instantaneous color and brightness adaptation. Disable for lights that do not support `light.turn_on` with color and brightness."
          },
          "interval": {
            "type": "integer",
            "default": 90,
            "description": "Frequency to adapt the lights, in seconds."
          },
          "lights": {
            "type": "array",
            "items": {
              "type": "string",
              "pattern": "^light\\."
            },
            "default": [],
            "description": "List of light entity_ids to be controlled (may be empty)."
          },
          "max_brightness": {
            "type": "integer",
            "default": 100,
            "description": "Maximum brightness percentage.",
            "minimum": 1,
            "maximum": 100
          },
          "max_color_temp": {
            "type": "integer",
            "default": 5500,
            "description": "Coldest color temperature in Kelvin.",
            "minimum": 1000,
            "maximum": 10000
          },
          "max_sunrise_time": {
            "type": "string",
            "pattern": "^[0-9]{2}:[0-9]{2}:[0-9]{2}$",
            "description": "Set the latest virtual sunrise time (HH:MM:SS), allowing for earlier sunrises."
          },
          "max_sunset_time": {
            "type": "string",
            "pattern": "^[0-9]{2}:[0-9]{2}:[0-9]{2}$",
            "description": "Set the latest virtual sunset time (HH:MM:SS), allowing for earlier sunsets."
          },
          "min_brightness": {
            "type": "integer",
            "default": 1,
            "description": "Minimum brightness percentage.",
            "minimum": 1,
            "maximum": 100
          },
          "min_color_temp": {
            "type": "integer",
            "default": 2000,
            "description": "Warmest color temperature in Kelvin.",
            "minimum": 1000,
            "maximum": 10000
          },
          "min_sunrise_time": {
            "type": "string",
            "pattern": "^[0-9]{2}:[0-9]{2}:[0-9]{2}$",
            "description": "Set the earliest virtual sunrise time (HH:MM:SS), allowing for later sunrises."
          },
          "min_sunset_time": {
            "type": "string",
            "pattern": "^[0-9]{2}:[0-9]{2}:[0-9]{2}$",
            "description": "Set the earliest virtual sunset time (HH:MM:SS), allowing for later sunsets."
          },
          "multi_light_intercept": {
            "type": "boolean",
            "default": true,
            "description": "Intercept and adapt `light.turn_on` calls that target multiple lights. This might result in splitting up a single `light.turn_on` call into multiple calls, e.g., when lights are in different switches. Requires `intercept` to be enabled."
          },
          "name": {
            "type": "string",
            "default": "default",
            "description": "Display name for this switch."
          },
          "only_once": {
            "type": "boolean",
            "default": false,
            "description": "Adapt lights only when they are turned on (`true`) or keep adapting them (`false`)."
          },
          "prefer_rgb_color": {
            "type": "boolean",
            "default": false,
            "description": "Whether to prefer RGB color adjustment over light color temperature when possible."
          },
          "send_split_delay": {
            "type": "integer",
            "default": 0,
            "description": "Delay (ms) between `separate_turn_on_commands` for lights that don't support simultaneous brightness and color setting.",
            "minimum": 0,
            "maximum": 10000
          },
          "separate_turn_on_commands": {
            "type": "boolean",
            "default": false,
            "description": "Use separate `light.turn_on` calls for color and brightness, needed for some light types."
          },
          "skip_redundant_commands": {
            "type": "boolean",
            "default": false,
            "description": "Skip sending adaptation commands whose target state already equals the light's known state. Minimizes network traffic and improves the adaptation responsivity in some situations. Disable if physical light states get out of sync with HA's recorded state."
          },
          "sleep_brightness": {
            "type": "integer",
            "default": 1,
            "description": "Brightness percentage of lights in sleep mode.",
            "minimum": 1,
            "maximum": 100
          },
          "sleep_color_temp": {
            "type": "integer",
            "default": 1000,
            "description": "Color temperature in sleep mode (used when `sleep_rgb_or_color_temp` is `color_temp`) in Kelvin.",
            "minimum": 1000,
            "maximum": 10000
          },
          "sleep_rgb_color": {
            "type": "array",
            "items": {
              "type": "integer",
              "minimum": 0,
              "maximum": 255
            },
            "minItems": 3,
            "maxItems": 3,
            "default": [255, 56, 0],
            "description": "RGB color in sleep mode (used when sleep_rgb_or_color_temp is rgb_color)."
          },
          "sleep_rgb_or_color_temp": {
            "type": "string",
            "default": "color_temp",
            "enum": ["color_temp", "rgb_color"],
            "description": "Use either rgb_color or color_temp in sleep mode."
          },
          "sleep_transition": {
            "type": "integer",
            "default": 1,
            "description": "Duration of transition when sleep mode is toggled, in seconds."
          },
          "sunrise_offset": {
            "type": "integer",
            "default": 0,
            "description": "Adjust sunrise time with a positive or negative offset in seconds."
          },
          "sunrise_time": {
            "type": "string",
            "pattern": "^[0-9]{2}:[0-9]{2}:[0-9]{2}$",
            "description": "Set a fixed time (HH:MM:SS) for sunrise."
          },
          "sunset_offset": {
            "type": "integer",
            "default": 0,
            "description": "Adjust sunset time with a positive or negative offset in seconds."
          },
          "sunset_time": {
            "type": "string",
            "pattern": "^[0-9]{2}:[0-9]{2}:[0-9]{2}$",
            "description": "Set a fixed time (HH:MM:SS) for sunset."
          },
          "take_over_control": {
            "type": "boolean",
            "default": true,
            "description": "Pause adaptation of individual lights and hand over (manual) control to other sources that issue `light.turn_on` calls for lights that are on."
          },
          "take_over_control_mode": {
            "type": "string",
            "default": "pause_all",
            "description": "The adaptation pausing mode when other sources change brightness and/or color of lights. `pause_all` always pauses both brightness and color adaptation. `pause_changed` pauses the adaptation of only the changed attributes and continues adapting unchanged attributes, e.g., continues color adaptation when only brightness was changed.",
            "enum": ["pause_all", "pause_changed"]
          },
          "transition": {
            "type": "integer",
            "default": 45,
            "description": "Duration of transition when lights change, in seconds."
          },
          "transition_until_sleep": {
            "type": "boolean",
            "default": false,
            "description": "When enabled, Adaptive Lighting will treat sleep settings as the minimum, transitioning to these values after sunset."
          }
        }
      }
    }
  },
  "additionalProperties": true
}
